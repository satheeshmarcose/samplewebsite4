var epbjs=epbjs||{};epbjs.que=epbjs.que||[];epbjs.ezAdUnits=epbjs.ezAdUnits||[];epbjs.ezdss=epbjs.ezdss||[];epbjs.ezas=epbjs.ezas||[];epbjs.ezobid=epbjs.ezobid||[];window.ezoptbid=window.ezoptbid||[];epbjs.que.push(function(){epbjs.onEvent('adRenderSucceeded',function(e){var slot=getSlotForhb(e.bid.adUnitCode);var ic=slot.getTargeting('ic')[0];if(typeof ic!=='undefined'){ic=parseInt(ic);__ez.pel.Add(slot,[(new __ezDotData('refresh_count',ic))]);}
var ebbr=slot.getTargeting('eb_br');if(typeof ebbr!='undefined'){__ez.pel.Add(slot,[(new __ezDotData('filled_bid_hash',ebbr))]);}
if(typeof epbjs.SS[e.bid.bidder.toLowerCase()]!=="undefined"){var last_bid_val=0;if(typeof slot.getTargeting("lb")[0]!="undefined"){last_bid_val=parseInt(slot.getTargeting("lb")[0])/100000.0;}
__ez.pel.Add(slot,[(new __ezDotData("stat_source_id",epbjs.SS[e.bid.bidder.toLowerCase()]))],e.bid.cpm/1000,0,e.bid.cpm/1000,last_bid_val,epbjs.SS[e.bid.bidder.toLowerCase()]);}
var media_type=slot.getTargeting("hb_format");var prebid_source=slot.getTargeting("hb_rt");if(typeof media_type!==undefined&&media_type.length>0&&String(media_type[0])!==""){var media_type_str=String(media_type[0]);__ez.pel.Add(slot,[(new __ezDotData("media_type",media_type_str))]);}
if(typeof prebid_source!==undefined&&prebid_source.length>0&&String(prebid_source[0])!==""){var prebid_source_str=String(prebid_source[0]);__ez.pel.Add(slot,[(new __ezDotData("prebid_source",prebid_source_str))]);}
__ez.pel.Add(slot,[(new __ezDotData("loaded",1))],e.bid.cpm/1000,0,e.bid.cpm/1000,last_bid_val,epbjs.SS[e.bid.bidder.toLowerCase()]);if(typeof window.ezbfcr!=='undefined'||typeof window.ezbflclcr!=='undefined'){__ez.pel.Add(slot,[(new __ezDotData("bid_floor_local_dfp",bid_val_raw))]);__ez.pel.Add(slot,[(new __ezDotData("bid_floor_local_adx",bid_val_lcl))]);}
__ez.pel.Fire();});if(__enableAnalytics==true){epbjs.enableAnalytics([{provider:"ga",options:{trackerName:"gatestprebid"}}]);}
const consentManagement={usp:{cmpApi:'iab',timeout:100}};if(typeof window.__tcfapi==="function"){consentManagement.strictStorageEnforcement=true;consentManagement.gdpr={cmpApi:'iab',timeout:5*60*1000,defaultGdprScope:true,};}
var priceBuckets={};if(window.ezhbopt===true){priceBuckets.buckets=[{"precision":2,"min":0,"max":300,"increment":0.01}]}else{priceBuckets.buckets=[{"precision":2,"min":0,"max":5,"increment":0.01},{"precision":2,"min":5,"max":50,"increment":0.10},{"precision":2,"min":50,"max":120,"increment":5.00}]}
epbjs.aliasBidder('aol','onedisplay');epbjs.aliasBidder('aol','onemobile');var schain_domain='ezoic.ai';var dom='';if(typeof __ez_nid!='undefined'&&__ez_nid==21732118914){schain_domain='ezoic.co.uk';}
if(typeof location.host!='undefined'){dom=location.host}
var useCache=false;if(typeof window.ezpbCache!='undefined'){useCache=true;}
var userIdList=[{name:"criteo"},{name:"unifiedId",params:{url:"//match.adsrvr.org/track/rid?ttd_pid=muno13d&fmt=json"},storage:{type:"cookie",name:"pbjs-unifiedid",expires:60}},{name:"quantcastId"},{name:"amxId",storage:{name:"amxId",type:"html5",expires:1,}},{name:"sharedId",params:{},storage:{type:"cookie",name:"_sharedid",expires:365}},{name:"lotamePanoramaId",}]
var id5={name:"id5Id",params:{partner:457,},storage:{type:"html5",name:"id5id",expires:90,refreshInSeconds:8*3600}}
if(typeof __id5pd!=='undefined'){id5.params.pd=__id5pd;}
userIdList.push(id5);if(typeof yahoo_cid_he!=='undefined'&&isValid256Hash(yahoo_cid_he)){var yahooConnectId={name:"connectId",params:{pixelId:58713,he:yahoo_cid_he},storage:{type:"html5",name:"connectid",expires:1}}
userIdList.push(yahooConnectId);}
ezSchain={asi:schain_domain,sid:__sellerid,domain:dom,hp:1}
epbjs.setConfig({'criteo':{fastBidVersion:'latest',},useBidCache:useCache,s2sConfig:{accountId:'1',bidders:__s2sbidders,timeout:1500,enabled:true,endpoint:'https://pb-server.ezoic.com/openrtb2/auction',syncEndpoint:'https://pb-server.ezoic.com/cookie_sync',extPrebid:{aliases:{"viewdeosDX":"viewdeos"}}},schain:{validation:"strict",config:{ver:"1.0",complete:1,nodes:[ezSchain]}},priceGranularity:priceBuckets,userSync:{userIds:userIdList,filterSettings:{iframe:{bidders:__allBidders,filter:'include'},image:{bidders:['luponmedia'],filter:'include'}},syncDelay:3000,aliasSyncEnabled:true},consentManagement:consentManagement,bidderSequence:"fixed"});epbjs.setBidderConfig({bidders:['oftmedia'],config:{schain:{validation:"relaxed",config:{ver:"1.0",complete:1,nodes:[{"asi":"152media.info","sid":"152M7","hp":1},ezSchain]}}}});epbjs.setBidderConfig({bidders:['pubmatic'],config:{schain:{validation:"relaxed",config:{ver:"1.0",complete:1,nodes:[{"asi":"pubmatic.com","sid":"156983","hp":1},ezSchain]}}}});if(typeof __uIdHash!=='undefined'&&typeof __sspDomain!=='undefined'){epbjs.setBidderConfig({bidders:['criteo'],config:{ortb2:{user:{ext:{data:{eids:[{source:__sspDomain,uids:[{id:__uIdHash,atype:1,ext:{stype:"ppuid",persistence:"js"}}]}]}}}}}});}
epbjs.bidderSettings=epbjs.bidderSettings||{};epbjs.bidderSettings["standard"]={adserverTargeting:[{key:"epb",val:function(bidResponse){return bidResponse.bidderCode;}},{key:"epa",val:function(bidResponse){return bidResponse.adId;}},{key:"epp",val:function(bidResponse){return bidResponse.pbCg;}},{key:"epf",val:function(bidResponse){return bidResponse.mediaType;}},{key:"eps",val:function(bidResponse){if(bidResponse.bidder=="ehb"){return 0;}
if(typeof epbjs.SS[bidResponse.bidder.toLowerCase()]!=="undefined"){return epbjs.SS[bidResponse.bidder.toLowerCase()];}else if(typeof epbjs.SS[bidResponse.bidder]!=="undefined"){return epbjs.SS[bidResponse.bidder];}else{console.error("epbjs: NO MATCH");return 0;}}},{key:"epr",val:function(bidResponse){return bidResponse.source;}}]};epbjs.bidderSettings["criteo"]={storageAllowed:true};epbjs.bidderSettings["adagio"]={storageAllowed:true};epbjs.onEvent('bidResponse',function(e){if(typeof(epbjs.ezBidCache)!=='undefined'){epbjs.ezBidCache.setHigherBidForAdUnit(e);let topBid=epbjs.ezBidCache.getTopBidEventForAdUnit(e.adUnitCode);if(topBid!==null){e=topBid;}}
window.ezosethbbid(e);});epbjs.onEvent('auctionEnd',function(e){for(let idx in e.adUnitCodes){window.setAuctionFinished(e.adUnitCodes[idx]);}});epbjs.onEvent('bidWon',function(bid){epbjs.ezas[bid.adUnitCode]=bid.size;if(bid.bidder=="ehb"){epbjs.ezdss[bid.adUnitCode]=bid.ss;}else{if(typeof epbjs.SS[bid.bidder.toLowerCase()]!=="undefined"){epbjs.ezdss[bid.adUnitCode]=epbjs.SS[bid.bidder.toLowerCase()];if(epbjs.useAdj==true&&epbjs.bidders.indexOf(bid.bidder)>-1){epbjs.ezobid[bid.adUnitCode]=bid.cpm/epbjs.gadj;}}else if(typeof epbjs.SS[bid.bidder]!=="undefined"){epbjs.ezdss[bid.adUnitCode]=epbjs.SS[bid.bidder];if(epbjs.useAdj==true&&epbjs.bidders.indexOf(bid.bidder)>-1){epbjs.ezobid[bid.adUnitCode]=bid.cpm/epbjs.gadj;}}else{console.error("epbjs: NO MATCH");}}
if(typeof(epbjs.ezBidCache)!=='undefined'){epbjs.ezBidCache.clearBidForUnit(bid.adUnitCode,bid.bidderCode);}});});function getSlotForhb(adUnit){for(slot in window.ezslots){if(window[window.ezslots[slot]].getSlotElementId()==adUnit){return window[window.ezslots[slot]];}}}
function epbjsRequestAdUnits(adUnits){epbjs.que.push(function(){let cachedBids={};for(var i=0;i<adUnits.length;i++){if(typeof(epbjs.ezBidCache)!=='undefined'&&epbjs.ezBidCache.hasBidForAdUnit(adUnits[i].code)){let topBid=epbjs.ezBidCache.getTopBidEventForAdUnit(adUnits[i].code);if(topBid!==null){cachedBids[adUnits[i].code]={bids:topBid}}}
epbjs.ezAdUnits.push(JSON.parse(JSON.stringify(adUnits[i])));window.setAuctionActive(adUnits[i].code);}
if(cachedBids.length>0){if(typeof window.ezosethbbids=="function"){window.ezosethbbids(cachedBids);}else{window.ezosethbbidsInterval=setInterval(function(bidResponses){if(typeof ezosethbbids=='function'){ezosethbbids(bidResponses);}},130,cachedBids);}}
if(typeof(epbjs.ezBidCache)!=='undefined'&&(typeof(epbjs.testFeatures)==='undefined'||!epbjs.testFeatures.includes('positional-keys'))){for(let idx in adUnits){let originalUnit=epbjs.ezAdUnits[idx];let cachedBidders=epbjs.ezBidCache.getCachedBiddersForAdUnit(originalUnit.code);adUnits[idx].bids=originalUnit.bids.filter(bidConfig=>!cachedBidders.includes(bidConfig.bidder))}}
epbjs.addAdUnits(adUnits);epbjs.requestBids({bidsBackHandler:function(bidResponses){if(typeof window.ezosethbbids=="function"){window.ezosethbbids(bidResponses);}else{window.ezosethbbidsInterval=setInterval(function(bidResponses){if(typeof ezosethbbids=='function'){ezosethbbids(bidResponses);}},130,bidResponses);}}});});}
function epbjsRefreshSlot(slot){epbjs.que.push(function(){if(typeof(epbjs.ezBidCache)!=='undefined'&&(typeof(epbjs.testFeatures)==='undefined'||!epbjs.testFeatures.length>0)){let originalUnit=epbjs.ezAdUnits.filter(adunit=>adunit.code===slot.getSlotElementId())[0];if(typeof originalUnit!=='undefined'&&originalUnit){let cachedBidders=epbjs.ezBidCache.getCachedBiddersForAdUnit(slot.getSlotElementId());for(let idx in epbjs.adUnits){if(epbjs.adUnits[idx].code===originalUnit.code){epbjs.adUnits[idx].bids=originalUnit.bids.filter(bidConfig=>!cachedBidders.includes(bidConfig.bidder))}}}}
window.setAuctionActive(slot.getSlotElementId());epbjs.requestBids({adUnitCodes:[slot.getSlotElementId()],bidsBackHandler:function(bidResponses){epbjs.fastLoadAuctionEnd=true;window.ezosethbbids(bidResponses);if(typeof(epbjs.ezBidCache)!=='undefined'){let topCachedBid=epbjs.ezBidCache.getTopBidEventForAdUnit(slot.getSlotElementId());if(topCachedBid!==null){window.ezosethbbid(topCachedBid);}}}});});}
function setAuctionActive(slotElementID){window.activeAuctions=window.activeAuctions||{};window.activeAuctions[slotElementID]=true;}
function setAuctionFinished(slotElementID){if(window.activeAuctions){delete window.activeAuctions[slotElementID];}
if(Object.keys(window.activeAuctions).length<=0&&epbjs.testFeatures.includes('late-hb-load')){window.updateAllGamSlotsWithCache();}}
function updateAllGamSlotsWithCache(){if(typeof epbjs.ezBidCache==='undefined'||epbjs.ezBidCache===null){return;}
for(let hbSlot in epbjs.ezAdUnits){let topBid=epbjs.ezBidCache.getTopBidEventForAdUnit(epbjs.ezAdUnits[hbSlot].code);if(topBid!==null){window.ezosethbbid(topBid);}
let gamSlot=window.ezslots.map(slotName=>window[slotName]).filter(ezSlot=>ezSlot.getSlotElementId()===epbjs.ezAdUnits[hbSlot].code)[0];if(typeof gamSlot!=='undefined'&&gamSlot!==null){let isHbAd=gamSlot.getTargeting('nam')[0];if((typeof isHbAd==='undefined'||isHbAd!='1')&&typeof gamSlot.getResponseInformation==='function'&&gamSlot.getResponseInformation()){let lastBid=gamSlot.getTargeting('lb')[0];let hbBid=gamSlot.getTargeting('hb_opt')[0];if(typeof lastBid!=='undefined'&&typeof hbBid!=='undefined'){lastBid=parseInt(lastBid);hbBid=parseFloat(hbBid);if(hbBid*100>=lastBid){window.adjustHbValues(gamSlot);let gamSlotSizes=gamSlot.getSizes().map(size=>(size==='fluid')?[size]:[size.width,size.height]);let gamSlotTargeting=gamSlot.getTargetingMap();googletag.destroySlots([gamSlot]);let newSlot=googletag.defineSlot(gamSlot.getAdUnitPath(),gamSlotSizes,gamSlot.getSlotElementId());newSlot.setCollapseEmptyDiv(false).addService(googletag.pubads());for(key in gamSlotTargeting){newSlot.setTargeting(key,gamSlotTargeting[key][0]);}
googletag.display(gamSlot.getSlotElementId());googletag.pubads().refresh([newSlot]);for(let idx in window.ezslots){let slotName=ezslots[idx];if(window[slotName].getSlotElementId()===newSlot.getSlotElementId()){window[slotName]=newSlot;break;}}}}}}}}
function isValid256Hash(str){const regex=/^[a-fA-F0-9]{64}$/g;return str.match(regex)!==null;}